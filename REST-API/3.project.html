<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3.project</title>
    <script src="lib/jquery-3.1.1.min.js"></script>
    <script src="lib/3.project.js"></script>
    <style type="text/css">
        #editHeader, #saveBtn {
            display: none;
        }
    </style>
</head>
<body>


<table id="userList">
    <tr>
        <th>id</th>
        <th>name</th>
        <th>username</th>
        <th>email</th>
        <th></th>
    </tr>
</table>


<h1 id="addHeader">Add new user</h1>
<h1 id="editHeader">Edit user</h1>
<form>
    <input type="hidden" name="id"/>
    <label>name</label> <input name="name"/><br/>
    <label>username</label> <input name="username"/><br/>
    <label>email</label> <input name="email"/><br/>
    <button id="addBtn">add</button>
    <button id="saveBtn">save</button>
</form>


<script type="text/javascript">


    fetch('http://localhost:3000/users', {
        method: 'GET'
    }).then(function(response) {
        return response.json();
    }).then(function(data) {
        data.forEach(function(user) {
            $('#userList').append(
                $('<tr>')
                    .append($('<td>').text(user.id))
                    .append($('<td>').text(user.name))
                    .append($('<td>').text(user.username))
                    .append($('<td>').text(user.email))
                    .append('<td><button class="editBtn">E</button><button class="delBtn">D</button></td>')
            );
        });
        $('.delBtn').click(function() {
            var delId = $(this).parent().parent().children(':first-of-type').text();
            fetch('http://localhost:3000/users/'+delId, {
                method: 'DELETE'
            }).then(function(response) {
                return response.json();
            }).then(function(data) {
                console.log('usuniety user '+delId);
            });
        });

    }).catch(function(error) {
        console.log('error-get', error);
    });










</script>

</body>
</html>